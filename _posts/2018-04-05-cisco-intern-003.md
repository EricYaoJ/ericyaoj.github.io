---
title: Cisco PIRL - Day 3
date: 2018-04-05 18:00:00
description: Log for day THREE @ Cisco
categories:
- Cisco
- VPP
tags:
- Cisco
- VPP
photos:
-
---

# ToDo

- [x] Fix [tutorial wiki](https://wiki.fd.io/view/VPP/Progressive_VPP_Tutorial#Skills_to_be_Learned_2)
- [ ] Finish the [vpp progressive tutorial](https://wiki.fd.io/view/VPP/Progressive_VPP_Tutorial#Skills_to_be_Learned_2)
- [ ] Build a testbed on basis of today's work, which is shown below.

<div align="center">
<img src="https://www.zhiyuanyao.com/assets/images/X/cisco-intern/ns-gre-testbed.jpeg" alt=""/>
（NS-GRE Testbed）
</div>

# Log

## Wiki

Contribution can be found:
1. [08:43, 5 April 2018](https://wiki.fd.io/index.php?title=VPP/Progressive_VPP_Tutorial&oldid=7330)
2. [08:52, 5 April 2018](https://wiki.fd.io/index.php?title=VPP/Progressive_VPP_Tutorial&oldid=7331)

## Progressive VPP Tutorial

### Exercise: Switching

> Prerequisite: the initial state here is presumed to be the final state from the [last exercise of yesterday](https://www.zhiyuanyao.com/cisco/vpp/2018/04/04/cisco-intern-002/#GRE-Tunnel).
> 
> But if we start from the scratch, just skip the `start tabula rasa` part

#### Start Tabula Rasa

```bash
# start tabula rasa
ps -ef | grep vpp | awk '{print $2}'| xargs sudo kill
sudo ip link del dev vpp1host
sudo ip link del dev vpp1vpp2
rm -rf 10.10.1.1 10.10.1.2 de:2e:10:a6:32:1d
```

#### Configuration

Since we'll have to play with two vpp instances, I decided to reconfigure a little bit before get everything spinning around.

First, I duplicated the `startup.conf` to:

1. `startup.conf`: default `STARTUP_CONF`
2. `startup-vpp1.conf`: `STARTUP_CONF` for `vpp1`
3. `startup-vpp2.conf`: `STARTUP_CONF` for `vpp2`

Then I reconfigured my `~/.zshrc`:

```
...
125| alias vppmrc='make STARTUP_CONF="startup.conf" run'
126| alias vpp1run='cd /home/yzy/Projects/vpp; make STARTUP_CONF="startup-vpp1.conf" run'
127| alias vpp2run='cd /home/yzy/Projects/vpp; make STARTUP_CONF="startup-vpp2.conf" run'
...
```

With such configuration, we can now create two vpp instances with just two simple CLI:

```bash
vpp1run
vpp2run
```

#### Incremental Construction

<div align="center">
<img src="https://wiki.fd.io/images/b/bd/Switching_Topology.jpg" alt=""/>
（topology）
</div>

# Reference

- [Progressive VPP Tutorial](https://wiki.fd.io/view/VPP/Progressive_VPP_Tutorial#Skills_to_be_Learned_2)